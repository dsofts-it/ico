{
  "info": {
    "name": "ICO Commerce - Full App Flow",
    "_postman_id": "f065e3f3-bcf9-4c38-9a8d-7c3e6abfacd0",
    "description": "End-to-end Postman collection for running the full signup, login, catalog, cart, order, ICO, admin, and payment callback flows against the backend. Start with Auth -> Signup Email Init and move down in order.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "https://nirv-ico.onrender.com"
    },
    {
      "key": "userName",
      "value": "Local Test User"
    },
    {
      "key": "userEmail",
      "value": "user+ico@example.com"
    },
    {
      "key": "userPassword",
      "value": "Password123!"
    },
    {
      "key": "mobileNumber",
      "value": "9998887777"
    },
    {
      "key": "userPin",
      "value": "1234"
    },
    {
      "key": "otpCode",
      "value": "000000"
    },
    {
      "key": "mobileOtp",
      "value": "000000"
    },
    {
      "key": "userId",
      "value": ""
    },
    {
      "key": "userToken",
      "value": ""
    },
    {
      "key": "addressId",
      "value": ""
    },
    {
      "key": "categoryId",
      "value": ""
    },
    {
      "key": "productId",
      "value": ""
    },
    {
      "key": "productSlug",
      "value": ""
    },
    {
      "key": "cartItemId",
      "value": ""
    },
    {
      "key": "orderId",
      "value": ""
    },
    {
      "key": "icoTransactionId",
      "value": ""
    },
    {
      "key": "adminEmail",
      "value": "admin@example.com"
    },
    {
      "key": "adminPassword",
      "value": "Password123!"
    },
    {
      "key": "adminToken",
      "value": ""
    },
    {
      "key": "paymentCode",
      "value": "PAYMENT_SUCCESS"
    },
    {
      "key": "phonePeTransactionId",
      "value": "pp-demo-123"
    }
  ],
  "item": [
    {
      "name": "Health",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "health"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Auth - Signup & Login",
      "item": [
        {
          "name": "Signup Email - Init",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/signup/email-init",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "signup",
                "email-init"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"{{userName}}\",\n  \"email\": \"{{userEmail}}\",\n  \"password\": \"{{userPassword}}\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "let data = null;",
                  "try { data = pm.response.json(); } catch (err) {}",
                  "const v_userId = data && data.userId;",
                  "if (v_userId) { pm.collectionVariables.set('userId', v_userId); }"
                ]
              }
            }
          ]
        },
        {
          "name": "Signup Mobile - Init",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/signup/mobile-init",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "signup",
                "mobile-init"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"{{userName}}\",\n  \"mobile\": \"{{mobileNumber}}\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "let data = null;",
                  "try { data = pm.response.json(); } catch (err) {}",
                  "const v_userId = data && data.userId;",
                  "if (v_userId) { pm.collectionVariables.set('userId', v_userId); }"
                ]
              }
            }
          ]
        },
        {
          "name": "Signup - Verify OTP",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/signup/verify",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "signup",
                "verify"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"otp\": \"{{otpCode}}\",\n  \"type\": \"email\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "let data = null;",
                  "try { data = pm.response.json(); } catch (err) {}",
                  "const v_userToken = data && data.token;",
                  "if (v_userToken) { pm.collectionVariables.set('userToken', v_userToken); }",
                  "const v_userId = data && data._id;",
                  "if (v_userId) { pm.collectionVariables.set('userId', v_userId); }"
                ]
              }
            }
          ]
        },
        {
          "name": "Setup PIN",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/pin/setup",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "pin",
                "setup"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"pin\": \"{{userPin}}\"\n}"
            }
          },
          "response": []
        },
        {
          "name": "Login - Email & Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/login/email",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "login",
                "email"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{userEmail}}\",\n  \"password\": \"{{userPassword}}\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "let data = null;",
                  "try { data = pm.response.json(); } catch (err) {}",
                  "const v_userToken = data && data.token;",
                  "if (v_userToken) { pm.collectionVariables.set('userToken', v_userToken); }",
                  "const v_userId = data && data._id;",
                  "if (v_userId) { pm.collectionVariables.set('userId', v_userId); }"
                ]
              }
            }
          ]
        },
        {
          "name": "Login - Mobile Init (OTP)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/login/mobile-init",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "login",
                "mobile-init"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"mobile\": \"{{mobileNumber}}\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "let data = null;",
                  "try { data = pm.response.json(); } catch (err) {}",
                  "const v_userId = data && data.userId;",
                  "if (v_userId) { pm.collectionVariables.set('userId', v_userId); }"
                ]
              }
            }
          ]
        },
        {
          "name": "Login - Mobile Verify (OTP)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/login/mobile-verify",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "login",
                "mobile-verify"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"mobile\": \"{{mobileNumber}}\",\n  \"otp\": \"{{mobileOtp}}\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "let data = null;",
                  "try { data = pm.response.json(); } catch (err) {}",
                  "const v_userToken = data && data.token;",
                  "if (v_userToken) { pm.collectionVariables.set('userToken', v_userToken); }",
                  "const v_userId = data && data._id;",
                  "if (v_userId) { pm.collectionVariables.set('userId', v_userId); }"
                ]
              }
            }
          ]
        },
        {
          "name": "Login - PIN",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/login/pin",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "login",
                "pin"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"identifier\": \"{{userEmail}}\",\n  \"pin\": \"{{userPin}}\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "let data = null;",
                  "try { data = pm.response.json(); } catch (err) {}",
                  "const v_userToken = data && data.token;",
                  "if (v_userToken) { pm.collectionVariables.set('userToken', v_userToken); }",
                  "const v_userId = data && data._id;",
                  "if (v_userId) { pm.collectionVariables.set('userId', v_userId); }"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "User Profile & Addresses",
      "item": [
        {
          "name": "List Addresses",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/user/addresses",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "user",
                "addresses"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Add Address",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/user/addresses",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "user",
                "addresses"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"label\": \"Home\",\n  \"fullName\": \"{{userName}}\",\n  \"phone\": \"{{mobileNumber}}\",\n  \"line1\": \"221B Baker Street\",\n  \"city\": \"London\",\n  \"state\": \"London\",\n  \"postalCode\": \"NW16XE\",\n  \"country\": \"GB\",\n  \"isDefault\": true\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "let data = null;",
                  "try { data = pm.response.json(); } catch (err) {}",
                  "const v_addressId = (Array.isArray(data) && data[0] && data[0]._id) ? data[0]._id : null;",
                  "if (v_addressId) { pm.collectionVariables.set('addressId', v_addressId); }"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Address",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/user/addresses/{{addressId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "user",
                "addresses",
                "{{addressId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"label\": \"Home Updated\",\n  \"landmark\": \"Near Station\"\n}"
            }
          },
          "response": []
        },
        {
          "name": "Set Default Address",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/user/addresses/{{addressId}}/default",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "user",
                "addresses",
                "{{addressId}}",
                "default"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Address",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/user/addresses/{{addressId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "user",
                "addresses",
                "{{addressId}}"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Catalog",
      "item": [
        {
          "name": "List Products",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/products?limit=12",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "products"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "12"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "List Categories (Public)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/products/categories/list",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "products",
                "categories",
                "list"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Product by Id or Slug",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/products/{{productId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "products",
                "{{productId}}"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Cart",
      "item": [
        {
          "name": "Get Cart",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/cart",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "cart"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Add Item to Cart",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/cart/items",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "cart",
                "items"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productId\": \"{{productId}}\",\n  \"quantity\": 1\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "let data = null;",
                  "try { data = pm.response.json(); } catch (err) {}",
                  "const v_cartItemId = data && data.items && data.items[0] && data.items[0]._id;",
                  "if (v_cartItemId) { pm.collectionVariables.set('cartItemId', v_cartItemId); }"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Cart Item Quantity",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/cart/items/{{cartItemId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "cart",
                "items",
                "{{cartItemId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"quantity\": 2\n}"
            }
          },
          "response": []
        },
        {
          "name": "Remove Cart Item",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/cart/items/{{cartItemId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "cart",
                "items",
                "{{cartItemId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Clear Cart",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/cart",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "cart"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Orders",
      "item": [
        {
          "name": "Create Order (PhonePe)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "orders"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"shippingAddress\": {\n    \"name\": \"{{userName}}\",\n    \"line1\": \"221B Baker Street\",\n    \"city\": \"London\",\n    \"state\": \"London\",\n    \"postalCode\": \"NW16XE\",\n    \"country\": \"GB\",\n    \"phone\": \"{{mobileNumber}}\"\n  },\n  \"billingAddress\": {\n    \"name\": \"{{userName}}\",\n    \"line1\": \"221B Baker Street\",\n    \"city\": \"London\",\n    \"state\": \"London\",\n    \"postalCode\": \"NW16XE\",\n    \"country\": \"GB\",\n    \"phone\": \"{{mobileNumber}}\"\n  },\n  \"paymentMethod\": \"phonepe\",\n  \"shippingFee\": 0,\n  \"taxes\": 0\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "let data = null;",
                  "try { data = pm.response.json(); } catch (err) {}",
                  "const v_orderId = data && data.order && data.order._id;",
                  "if (v_orderId) { pm.collectionVariables.set('orderId', v_orderId); }"
                ]
              }
            }
          ]
        },
        {
          "name": "Get My Orders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "orders"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Order by Id",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "orders",
                "{{orderId}}"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "ICO",
      "item": [
        {
          "name": "Public Token Price",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/ico/price",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "ico",
                "price"
              ]
            }
          },
          "response": []
        },
        {
          "name": "My ICO Summary",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/ico/summary",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "ico",
                "summary"
              ]
            }
          },
          "response": []
        },
        {
          "name": "ICO Transactions History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/ico/transactions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "ico",
                "transactions"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Buy Tokens (PhonePe)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/ico/buy",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "ico",
                "buy"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tokenAmount\": 10\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "let data = null;",
                  "try { data = pm.response.json(); } catch (err) {}",
                  "const v_icoTransactionId = data && data.transaction && data.transaction._id;",
                  "if (v_icoTransactionId) { pm.collectionVariables.set('icoTransactionId', v_icoTransactionId); }"
                ]
              }
            }
          ]
        },
        {
          "name": "Sell Tokens",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/ico/sell",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "ico",
                "sell"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tokenAmount\": 5\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "let data = null;",
                  "try { data = pm.response.json(); } catch (err) {}",
                  "const v_icoTransactionId = data && data.transaction && data.transaction._id;",
                  "if (v_icoTransactionId) { pm.collectionVariables.set('icoTransactionId', v_icoTransactionId); }"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Admin",
      "item": [
        {
          "name": "Admin Login (Email & Password)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/login/email",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "login",
                "email"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{adminEmail}}\",\n  \"password\": \"{{adminPassword}}\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "let data = null;",
                  "try { data = pm.response.json(); } catch (err) {}",
                  "const v_adminToken = data && data.token;",
                  "if (v_adminToken) { pm.collectionVariables.set('adminToken', v_adminToken); }"
                ]
              }
            }
          ]
        },
        {
          "name": "List Categories (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/categories",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "categories"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/categories",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "categories"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Electronics\",\n  \"description\": \"Devices and accessories\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "let data = null;",
                  "try { data = pm.response.json(); } catch (err) {}",
                  "const v_categoryId = data && data._id;",
                  "if (v_categoryId) { pm.collectionVariables.set('categoryId', v_categoryId); }"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Category",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/categories/{{categoryId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "categories",
                "{{categoryId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"Electronics and gadgets\",\n  \"isActive\": true\n}"
            }
          },
          "response": []
        },
        {
          "name": "Delete Category",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/categories/{{categoryId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "categories",
                "{{categoryId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "List Products (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/products",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "products"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Product",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/products",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "products"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Sample Phone\",\n  \"description\": \"Mid-range device\",\n  \"price\": 49999,\n  \"salePrice\": 44999,\n  \"currency\": \"INR\",\n  \"stock\": 25,\n  \"sku\": \"PHONE-001\",\n  \"category\": \"{{categoryId}}\",\n  \"attributes\": [\n    {\n      \"key\": \"color\",\n      \"value\": \"black\"\n    },\n    {\n      \"key\": \"storage\",\n      \"value\": \"128GB\"\n    }\n  ],\n  \"images\": [\n    {\n      \"url\": \"https://example.com/phone.jpg\",\n      \"altText\": \"Phone\"\n    }\n  ],\n  \"isActive\": true\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "let data = null;",
                  "try { data = pm.response.json(); } catch (err) {}",
                  "const v_productId = data && data._id;",
                  "if (v_productId) { pm.collectionVariables.set('productId', v_productId); }",
                  "const v_productSlug = data && data.slug;",
                  "if (v_productSlug) { pm.collectionVariables.set('productSlug', v_productSlug); }"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Product",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/products/{{productId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "products",
                "{{productId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"price\": 45999,\n  \"stock\": 30,\n  \"isActive\": true\n}"
            }
          },
          "response": []
        },
        {
          "name": "Delete Product",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/admin/products/{{productId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "admin",
                "products",
                "{{productId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "List Orders (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/orders/admin",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "orders",
                "admin"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Order Status (Admin)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/orders/admin/{{orderId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "orders",
                "admin",
                "{{orderId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"confirmed\",\n  \"paymentStatus\": \"paid\"\n}"
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Payments",
      "item": [
        {
          "name": "PhonePe Callback - Order",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/payments/phonepe/callback",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "payments",
                "phonepe",
                "callback"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"{{paymentCode}}\",\n  \"merchantTransactionId\": \"{{orderId}}\",\n  \"transactionId\": \"{{phonePeTransactionId}}\",\n  \"amount\": 1000\n}"
            }
          },
          "response": []
        },
        {
          "name": "PhonePe Callback - ICO",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/payments/phonepe/callback",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "payments",
                "phonepe",
                "callback"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"{{paymentCode}}\",\n  \"merchantTransactionId\": \"{{icoTransactionId}}\",\n  \"transactionId\": \"{{phonePeTransactionId}}\",\n  \"amount\": 1000\n}"
            }
          },
          "response": []
        }
      ]
    }
  ]
}
